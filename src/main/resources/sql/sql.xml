<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="yumyum">
	 <select id="recipeSelectList" parameterType="hashmap" resultType="hashmap">
		select * from recipe
   </select>
 
	<select id="recipeSelectOne" parameterType="hashmap" resultType="hashmap">
 		select * from recipe where type = #{type}
 	</select>
 	<select id="BoardSelectList" parameterType="hashmap" resultType="hashmap">
      select * from board
   </select>
     <select id="BoardSelectOne" parameterType="hashmap" resultType="hashmap">
      select  TYPE,NAME,TITLE,DATE_FORMAT(UPLOAD, '%X-%m-%d') as UPLOAD, VIEWCNT
      from board where type = #{type}
    </select>
    
    <select id="reviewSelectOne" parameterType="hashmap" resultType="hashmap">
      select  TITLE,WRITER,DATE_FORMAT(UPLOAD, '%X-%m-%d') as UPLOAD, VIEWCNT,RECOMMEND,IMAGE
      from REVIEW where RECOMMEND <![CDATA[ < ]]> 20
    </select>
    
    <select id="bestreviewSelectOne" parameterType="hashmap" resultType="hashmap">
      select TITLE,WRITER,DATE_FORMAT(UPLOAD, '%X-%m-%d') as UPLOAD, VIEWCNT,RECOMMEND,IMAGE
      from REVIEW where RECOMMEND >= 20
    </select> 
    
    <select id="tokenCheck" parameterType="hashmap" resultType="hashmap">
    	select * from NAVERLOGIN where access_token = #{access_token}
    </select>
    <insert id="tokenAdd" parameterType="hashmap">
		insert into NAVERLOGIN (access_token, EMAIL, NAME, NICKNAME, AGE) values (#{access_token}, #{EMAIL},#{NAME},#{NICKNAME},#{AGE})
<!-- 			insert into NAVERLOGIN (access_token) values (#{access_token}) -->
	</insert>
	<update id="tokenUpdate" parameterType="hashmap">
		update NAVERLOGIN
		set EMAIL = #{EMAIL}, 
		    NAME = #{NAME}, 
		    NICKNAME = #{NICKNAME}, 
		    AGE = #{AGE}
		where access_token = #{access_token}
	</update>
</mapper>